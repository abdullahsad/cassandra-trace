'use strict';

var Promise = require('bluebird');
var util = require('util');
var check = require('check-types');

var dseDriver = void 0;
try {
  // eslint-disable-next-line import/no-extraneous-dependencies, import/no-unresolved
  dseDriver = require('dse-driver');
} catch (e) {
  dseDriver = null;
}

var cql = Promise.promisifyAll(dseDriver || require('cassandra-driver'));

var validators = {};
validators.is_array = function (obj) {
  return check.array(obj);
};
validators.is_object = function (obj) {
  return check.object(obj);
};
validators.is_long = function (obj) {
  return obj instanceof cql.types.Long;
};
validators.is_decimal = function (obj) {
  return obj instanceof cql.types.BigDecimal;
};
validators.is_integer = function (obj) {
  return check.integer(obj);
};
validators.is_var_int = function (obj) {
  return obj instanceof cql.types.Integer;
};
validators.is_boolean = function (obj) {
  return obj === true || obj === false;
};
validators.is_number = function (obj) {
  return check.number(obj);
};
validators.is_string = function (obj) {
  return check.string(obj);
};
validators.is_local_date = function (obj) {
  return obj instanceof cql.types.LocalDate;
};
validators.is_local_time = function (obj) {
  return obj instanceof cql.types.LocalTime;
};
validators.is_date = function (obj) {
  return check.date(new Date(obj));
};
validators.is_buffer = function (obj) {
  return obj instanceof Buffer;
};
validators.is_timeuuid = function (obj) {
  return obj instanceof cql.types.TimeUuid;
};
validators.is_uuid = function (obj) {
  return obj instanceof cql.types.Uuid;
};
validators.is_inet = function (obj) {
  return obj instanceof cql.types.InetAddress;
};
validators.is_frozen = function (obj) {
  return validators.is_array(obj) || validators.is_object(obj);
};

var TYPE_MAP = {
  ascii: { validator: validators.is_string },
  bigint: { validator: validators.is_long },
  blob: { validator: validators.is_buffer },
  boolean: { validator: validators.is_boolean },
  counter: { validator: validators.is_long },
  date: { validator: validators.is_local_date },
  decimal: { validator: validators.is_decimal },
  double: { validator: validators.is_number },
  float: { validator: validators.is_number },
  inet: { validator: validators.is_inet },
  int: { validator: validators.is_integer },
  list: { validator: validators.is_array },
  map: { validator: validators.is_object },
  set: { validator: validators.is_array },
  smallint: { validator: validators.is_integer },
  text: { validator: validators.is_string },
  time: { validator: validators.is_local_time },
  timestamp: { validator: validators.is_date },
  timeuuid: { validator: validators.is_timeuuid },
  tinyint: { validator: validators.is_integer },
  uuid: { validator: validators.is_uuid },
  varchar: { validator: validators.is_string },
  varint: { validator: validators.is_var_int },
  frozen: { validator: validators.is_frozen }
};

TYPE_MAP.generic_type_validator = function f(fieldtype) {
  if (!this[fieldtype]) return null;

  return {
    validator: this[fieldtype].validator,
    message(value, propName, fieldType) {
      return util.format('Invalid Value: "%s" for Field: %s (Type: %s)', value, propName, fieldType);
    },
    type: 'type_validator'
  };
};

module.exports = TYPE_MAP;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy92YWxpZGF0b3JzL2RhdGF0eXBlcy5qcyJdLCJuYW1lcyI6WyJQcm9taXNlIiwicmVxdWlyZSIsInV0aWwiLCJjaGVjayIsImRzZURyaXZlciIsImUiLCJjcWwiLCJwcm9taXNpZnlBbGwiLCJ2YWxpZGF0b3JzIiwiaXNfYXJyYXkiLCJvYmoiLCJhcnJheSIsImlzX29iamVjdCIsIm9iamVjdCIsImlzX2xvbmciLCJ0eXBlcyIsIkxvbmciLCJpc19kZWNpbWFsIiwiQmlnRGVjaW1hbCIsImlzX2ludGVnZXIiLCJpbnRlZ2VyIiwiaXNfdmFyX2ludCIsIkludGVnZXIiLCJpc19ib29sZWFuIiwiaXNfbnVtYmVyIiwibnVtYmVyIiwiaXNfc3RyaW5nIiwic3RyaW5nIiwiaXNfbG9jYWxfZGF0ZSIsIkxvY2FsRGF0ZSIsImlzX2xvY2FsX3RpbWUiLCJMb2NhbFRpbWUiLCJpc19kYXRlIiwiZGF0ZSIsIkRhdGUiLCJpc19idWZmZXIiLCJCdWZmZXIiLCJpc190aW1ldXVpZCIsIlRpbWVVdWlkIiwiaXNfdXVpZCIsIlV1aWQiLCJpc19pbmV0IiwiSW5ldEFkZHJlc3MiLCJpc19mcm96ZW4iLCJUWVBFX01BUCIsImFzY2lpIiwidmFsaWRhdG9yIiwiYmlnaW50IiwiYmxvYiIsImJvb2xlYW4iLCJjb3VudGVyIiwiZGVjaW1hbCIsImRvdWJsZSIsImZsb2F0IiwiaW5ldCIsImludCIsImxpc3QiLCJtYXAiLCJzZXQiLCJzbWFsbGludCIsInRleHQiLCJ0aW1lIiwidGltZXN0YW1wIiwidGltZXV1aWQiLCJ0aW55aW50IiwidXVpZCIsInZhcmNoYXIiLCJ2YXJpbnQiLCJmcm96ZW4iLCJnZW5lcmljX3R5cGVfdmFsaWRhdG9yIiwiZiIsImZpZWxkdHlwZSIsIm1lc3NhZ2UiLCJ2YWx1ZSIsInByb3BOYW1lIiwiZmllbGRUeXBlIiwiZm9ybWF0IiwidHlwZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTUEsVUFBVUMs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LEVBckJTO0FBc0JmMkIsV0FBUyxFQUFFcEIsV0FBV3RDLFdBQVdrQixTQUF4QixFQXRCTTtBQXVCZnlDLFVBQVEsRUFBRXJCLFdBQVd0QyxXQUFXYSxVQUF4QixFQXZCTztBQXdCZitDLFVBQVEsRUFBRXRCLFdBQVd0QyxXQUFXbUMsU0FBeEI7QUF4Qk8sQ0FBakI7O0FBNEJBQyxTQUFTeUIsc0JBQVQsR0FBa0MsU0FBU0MsQ0FBVCxDQUFXQyxTQUFYLEVBQXNCO0FBQ3RELE1BQUksQ0FBQyxLQUFLQSxTQUFMLENBQUwsRUFBc0IsT0FBTyxJQUFQOztBQUV0QixTQUFPO0FBQ0x6QixlQUFXLEtBQUt5QixTQUFMLEVBQWdCekIsU0FEdEI7QUFFTDBCLFlBQVFDLEtBQVIsRUFBZUMsUUFBZixFQUF5QkMsU0FBekIsRUFBb0M7QUFDbEMsYUFBT3pFLEtBQUswRSxNQUFMLENBQVksOENBQVosRUFBNERILEtBQTVELEVBQW1FQyxRQUFuRSxFQUE2RUMsU0FBN0UsQ0FBUDtBQUNELEtBSkk7QUFLTEUsVUFBTTtBQUxELEdBQVA7QUFPRCxDQVZEOztBQVlBQyxPQUFPQyxPQUFQLEdBQWlCbkMsUUFBakIiLCJmaWxlIjoiZGF0YXR5cGVzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUHJvbWlzZSA9IHJlcXVpcmUoJ2JsdWViaXJkJyk7XG5jb25zdCB1dGlsID0gcmVxdWlyZSgndXRpbCcpO1xuY29uc3QgY2hlY2sgPSByZXF1aXJlKCdjaGVjay10eXBlcycpO1xuXG5sZXQgZHNlRHJpdmVyO1xudHJ5IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1leHRyYW5lb3VzLWRlcGVuZGVuY2llcywgaW1wb3J0L25vLXVucmVzb2x2ZWRcbiAgZHNlRHJpdmVyID0gcmVxdWlyZSgnZHNlLWRyaXZlcicpO1xufSBjYXRjaCAoZSkge1xuICBkc2VEcml2ZXIgPSBudWxsO1xufVxuXG5jb25zdCBjcWwgPSBQcm9taXNlLnByb21pc2lmeUFsbChkc2VEcml2ZXIgfHwgcmVxdWlyZSgnY2Fzc2FuZHJhLWRyaXZlcicpKTtcblxuY29uc3QgdmFsaWRhdG9ycyA9IHt9O1xudmFsaWRhdG9ycy5pc19hcnJheSA9IChvYmopID0+IChjaGVjay5hcnJheShvYmopKTtcbnZhbGlkYXRvcnMuaXNfb2JqZWN0ID0gKG9iaikgPT4gKGNoZWNrLm9iamVjdChvYmopKTtcbnZhbGlkYXRvcnMuaXNfbG9uZyA9IChvYmopID0+ICgob2JqIGluc3RhbmNlb2YgY3FsLnR5cGVzLkxvbmcpKTtcbnZhbGlkYXRvcnMuaXNfZGVjaW1hbCA9IChvYmopID0+ICgob2JqIGluc3RhbmNlb2YgY3FsLnR5cGVzLkJpZ0RlY2ltYWwpKTtcbnZhbGlkYXRvcnMuaXNfaW50ZWdlciA9IChvYmopID0+IChjaGVjay5pbnRlZ2VyKG9iaikpO1xudmFsaWRhdG9ycy5pc192YXJfaW50ID0gKG9iaikgPT4gKChvYmogaW5zdGFuY2VvZiBjcWwudHlwZXMuSW50ZWdlcikpO1xudmFsaWRhdG9ycy5pc19ib29sZWFuID0gKG9iaikgPT4gKChvYmogPT09IHRydWUgfHwgb2JqID09PSBmYWxzZSkpO1xudmFsaWRhdG9ycy5pc19udW1iZXIgPSAob2JqKSA9PiAoY2hlY2subnVtYmVyKG9iaikpO1xudmFsaWRhdG9ycy5pc19zdHJpbmcgPSAob2JqKSA9PiAoY2hlY2suc3RyaW5nKG9iaikpO1xudmFsaWRhdG9ycy5pc19sb2NhbF9kYXRlID0gKG9iaikgPT4gKChvYmogaW5zdGFuY2VvZiBjcWwudHlwZXMuTG9jYWxEYXRlKSk7XG52YWxpZGF0b3JzLmlzX2xvY2FsX3RpbWUgPSAob2JqKSA9PiAoKG9iaiBpbnN0YW5jZW9mIGNxbC50eXBlcy5Mb2NhbFRpbWUpKTtcbnZhbGlkYXRvcnMuaXNfZGF0ZSA9IChvYmopID0+IChjaGVjay5kYXRlKG5ldyBEYXRlKG9iaikpKTtcbnZhbGlkYXRvcnMuaXNfYnVmZmVyID0gKG9iaikgPT4gKChvYmogaW5zdGFuY2VvZiBCdWZmZXIpKTtcbnZhbGlkYXRvcnMuaXNfdGltZXV1aWQgPSAob2JqKSA9PiAoKG9iaiBpbnN0YW5jZW9mIGNxbC50eXBlcy5UaW1lVXVpZCkpO1xudmFsaWRhdG9ycy5pc191dWlkID0gKG9iaikgPT4gKChvYmogaW5zdGFuY2VvZiBjcWwudHlwZXMuVXVpZCkpO1xudmFsaWRhdG9ycy5pc19pbmV0ID0gKG9iaikgPT4gKChvYmogaW5zdGFuY2VvZiBjcWwudHlwZXMuSW5ldEFkZHJlc3MpKTtcbnZhbGlkYXRvcnMuaXNfZnJvemVuID0gKG9iaikgPT4gKCh2YWxpZGF0b3JzLmlzX2FycmF5KG9iaikgfHwgdmFsaWRhdG9ycy5pc19vYmplY3Qob2JqKSkpO1xuXG5jb25zdCBUWVBFX01BUCA9IHtcbiAgYXNjaWk6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX3N0cmluZyB9LFxuICBiaWdpbnQ6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX2xvbmcgfSxcbiAgYmxvYjogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfYnVmZmVyIH0sXG4gIGJvb2xlYW46IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX2Jvb2xlYW4gfSxcbiAgY291bnRlcjogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfbG9uZyB9LFxuICBkYXRlOiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19sb2NhbF9kYXRlIH0sXG4gIGRlY2ltYWw6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX2RlY2ltYWwgfSxcbiAgZG91YmxlOiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19udW1iZXIgfSxcbiAgZmxvYXQ6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX251bWJlciB9LFxuICBpbmV0OiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19pbmV0IH0sXG4gIGludDogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfaW50ZWdlciB9LFxuICBsaXN0OiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19hcnJheSB9LFxuICBtYXA6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX29iamVjdCB9LFxuICBzZXQ6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX2FycmF5IH0sXG4gIHNtYWxsaW50OiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19pbnRlZ2VyIH0sXG4gIHRleHQ6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX3N0cmluZyB9LFxuICB0aW1lOiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19sb2NhbF90aW1lIH0sXG4gIHRpbWVzdGFtcDogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfZGF0ZSB9LFxuICB0aW1ldXVpZDogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfdGltZXV1aWQgfSxcbiAgdGlueWludDogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfaW50ZWdlciB9LFxuICB1dWlkOiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc191dWlkIH0sXG4gIHZhcmNoYXI6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX3N0cmluZyB9LFxuICB2YXJpbnQ6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX3Zhcl9pbnQgfSxcbiAgZnJvemVuOiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19mcm96ZW4gfSxcbn07XG5cblxuVFlQRV9NQVAuZ2VuZXJpY190eXBlX3ZhbGlkYXRvciA9IGZ1bmN0aW9uIGYoZmllbGR0eXBlKSB7XG4gIGlmICghdGhpc1tmaWVsZHR5cGVdKSByZXR1cm4gbnVsbDtcblxuICByZXR1cm4ge1xuICAgIHZhbGlkYXRvcjogdGhpc1tmaWVsZHR5cGVdLnZhbGlkYXRvcixcbiAgICBtZXNzYWdlKHZhbHVlLCBwcm9wTmFtZSwgZmllbGRUeXBlKSB7XG4gICAgICByZXR1cm4gdXRpbC5mb3JtYXQoJ0ludmFsaWQgVmFsdWU6IFwiJXNcIiBmb3IgRmllbGQ6ICVzIChUeXBlOiAlcyknLCB2YWx1ZSwgcHJvcE5hbWUsIGZpZWxkVHlwZSk7XG4gICAgfSxcbiAgICB0eXBlOiAndHlwZV92YWxpZGF0b3InLFxuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBUWVBFX01BUDtcbiJdfQ==